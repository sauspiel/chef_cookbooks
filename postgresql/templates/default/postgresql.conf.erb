# configured by chef for <%= @node[:fqdn] %>


data_directory = '<%= @datadir %>'	
hba_file = '<%= @confdir %>/pg_hba.conf'	
ident_file = '<%= @confdir %>/pg_ident.conf'	

external_pid_file = '/var/run/postgresql/<%= @node[:postgresql][:version] %>-main.pid'
unix_socket_directory = '/var/run/postgresql'

listen_addresses = '<%= @addresses.join(",")%>'
port = <%= @node[:postgresql][:port] %>	
max_connections = <%= @node[:postgresql][:max_connections] %>
superuser_reserved_connections = <%= @node[:postgresql][:superuser_reserved_connections] %>
ssl = <%= @node[:postgresql][:ssl] %>

shared_buffers = <%= @node[:postgresql][:shared_buffers] %> 
temp_buffers = <%= @node[:postgresql][:temp_buffers] %>
work_mem = <%= @node[:postgresql][:work_mem] %>
maintenance_work_mem = <%= @node[:postgresql][:maintenance_work_mem] %>

effective_io_concurrency = <%= @node[:postgresql][:effective_io_concurrency] %>

datestyle = '<%= @node[:postgresql][:datestyle] %>'
timezone = '<%= @node[:postgresql][:timezone] %>'
lc_messages = '<%= @node[:postgresql][:log_language] %>' 
lc_monetary = '<%= @node[:postgresql][:lc_language] %>' 
lc_numeric =  '<%= @node[:postgresql][:lc_language] %>'
lc_time =     '<%= @node[:postgresql][:lc_language] %>'	
default_text_search_config = '<%= @node[:postgresql][:text_search_config] %>'


wal_level = <%= @node[:postgresql][:wal_level] %>
max_wal_senders = <%= @node[:postgresql][:max_wal_senders] %>
wal_keep_segments = <%= @node[:postgresql][:wal_keep_segments] %>

hot_standby = <%= @node[:postgresql][:hot_standby] %>
archive_mode = <%= @node[:postgresql][:archive_mode] %> 
archive_command = '<%= @node[:postgresql][:archive_command] %>'
max_standby_streaming_delay = <%= @node[:postgresql][:max_standby_streaming_delay] %>
max_standby_archive_delay = <%= @node[:postgresql][:max_standby_archive_delay] %>

fsync = <%= @node[:postgresql][:fsync] %>
synchronous_commit = <%= @node[:postgresql][:synchronous_commit] %>

commit_delay = <%= @node[:postgresql][:commit_delay] %>
commit_siblings = <%= @node[:postgresql][:commit_siblings] %>

checkpoint_segments = <%= @node[:postgresql][:checkpoint_segments] %>

log_min_duration_statement = <%= @node[:postgresql][:log_min_duration_statement] %>
log_line_prefix = '%t %d %p '
log_timezone = 'localtime'
log_lock_waits = <%= @node[:postgresql][:log_lock_waits] %>
log_checkpoints = <%= @node[:postgresql][:log_checkpoints] %>

track_activities = on
track_counts = on

autovacuum = on
autovacuum_max_workers = <%= @node[:postgresql][:autovacuum_max_workers] %>
autovacuum_naptime = <%= @node[:postgresql][:autovacuum_naptime] %>

