#
# /etc/sudoers
# 
# Generated by Chef for <%= @node[:fqdn] %>
# 

Defaults        !lecture,tty_tickets,!fqdn
Defaults        secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
Defaults        env_keep="HOME PATH"

# User privilege specification
root    			ALL=(ALL) ALL

<% if @sudoers_groups && !@sudoers_groups.empty? %>
<% @sudoers_groups.each do |group, conf| -%>
<% if conf[:enabled] %>
# Members of the group '<%= group %>' may gain root privileges
%<%= group %> ALL=(ALL) ALL
<% end -%>
<% end -%>
<% end %>

<% if @sudoers_users && !@sudoers_users.empty? %>
<% @sudoers_users.each do |conf| -%>
<%= conf[:user] %> ALL=(<%= conf[:target_user] || "ALL" %>) <% if conf[:nopassword] %><%= "NOPASSWD: " %><% end %><%= conf[:command] || "ALL" %>
<% end -%>
<% end %>

#includedir /etc/sudoers.d
